---
export interface Props {
	image: ImageMetadata | string;
	name: string;
	title: string;
	quote: string;
	imageAlt?: string;
}

const { image, name, title, quote, imageAlt } = Astro.props;

// Generate alt text if not provided
const altText = imageAlt || `Profile photo of ${name}`;

// Handle both ImageMetadata (imported images) and string paths
const imageSrc = typeof image === 'string' ? image : image.src;
---

<article 
	class="crew-member-card flex flex-col items-center text-center p-6 rounded-xl
		   min-w-[250px] max-w-[400px] min-h-[400px] w-full
		   glass-panel hover:border-neon-cyan/30 transition-all duration-300 
		   hover:-translate-y-1 group"
	role="article"
	aria-label={`${name}, ${title}`}
>
	<!-- Profile Image -->
	<div class="relative mb-6 w-32 h-32 md:w-40 md:h-40 flex-shrink-0">
		<!-- Glow effect on hover -->
		<div class="absolute inset-0 rounded-full bg-gradient-to-tr from-neon-cyan/20 to-deep-magenta/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
		
		<!-- Border ring -->
		<div class="absolute inset-0 rounded-full border-4 border-neon-cyan/30 group-hover:border-neon-cyan/60 transition-colors duration-300"></div>
		
		<!-- Image -->
		<img
			src={imageSrc}
			alt={altText}
			class="relative z-10 w-full h-full object-cover rounded-full"
			loading="lazy"
		/>
	</div>

	<!-- Name -->
	<h3 class="text-2xl md:text-3xl font-bold text-white mb-2 group-hover:text-neon-cyan transition-colors duration-300">
		{name}
	</h3>

	<!-- Title -->
	<p class="text-sm md:text-base font-mono text-neon-teal uppercase tracking-wider mb-4">
		{title}
	</p>

	<!-- Quote -->
	<blockquote class="relative text-sm md:text-base text-gray-300 leading-relaxed italic">
		<span class="text-neon-cyan/50 text-2xl absolute -left-2 -top-2" aria-hidden="true">"</span>
		<p class="px-4">
			{quote}
		</p>
		<span class="text-neon-cyan/50 text-2xl absolute -right-2 -bottom-4" aria-hidden="true">"</span>
	</blockquote>
</article>

<style>
	.crew-member-card {
		/* Ensure consistent sizing in different layouts */
		box-sizing: border-box;
		
		/* Flex/Grid compatibility */
		align-self: stretch;
		
		/* Height constraints */
		max-height: 600px;
	}

	/* Ensure proper aspect ratio for images */
	.crew-member-card img {
		aspect-ratio: 1;
	}

	/* Support for reduced motion */
	@media (prefers-reduced-motion: reduce) {
		.crew-member-card,
		.crew-member-card * {
			transition: none !important;
			animation: none !important;
		}
	}

	/* High contrast mode support */
	@media (prefers-contrast: high) {
		.crew-member-card {
			border: 2px solid currentColor;
		}
	}

	/* Responsive sizing for smaller viewports */
	@media (max-width: 640px) {
		.crew-member-card {
			@apply min-h-[380px];
		}
	}
</style>

